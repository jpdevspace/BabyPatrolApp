(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{204:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(81),l=a.n(o),c=(a(95),a(4)),i=a(10),s=a(9),u=a(87),m=a(7),d=a(38),p=a.n(d),b=a(82),f=a(39),g=a.n(f);a(97),a(100);g.a.initializeApp({apiKey:"AIzaSyATYA5g7ShVwfVxDs9B23IXw7hN_xH2Hxg",authDomain:"babytimes-9476d.firebaseapp.com",databaseURL:"https://babytimes-9476d.firebaseio.com",projectId:"babytimes-9476d",storageBucket:"babytimes-9476d.appspot.com",messagingSenderId:"702098493706"});var E=g.a,h=E.firestore(),y=Object(n.createContext)(),v=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),o=a[0],l=a[1];return E.auth().onAuthStateChanged(function(e){}),r.a.createElement(y.Provider,{value:{isAuthed:o,userLoggedIn:function(e){localStorage.setItem("babyPatrolUID",e),l(!0)},userLoggedOut:function(){localStorage.removeItem("babyPatrolUID"),l(!1),E.auth().signOut().then(function(){}).catch(function(e){console.error("Error at logoutUser() \n Error Code: ".concat(e.code," \n Msg: ").concat(e.message))})}}},e.children)};function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var O=Object(n.createContext)(),j=function(e){var t=Object(n.useContext)(y).isAuthed,a=Object(n.useState)([]),o=Object(m.a)(a,2),l=o[0],c=o[1],i=Object(n.useState)(null),d=Object(m.a)(i,2),f=d[0],g=d[1];return r.a.createElement(O.Provider,{value:{babyRecords:l,lastRecords:f,loadAllUserData:function(){if(t){var e=localStorage.getItem("babyPatrolUID");(function(e){if(e){var t=[];return h.collection("records").doc(e).collection("activities").orderBy("time","desc").get().then(function(e){return e.forEach(function(e){return t.push(e.data())}),t}).catch(function(e){return e})}throw Error("notAuthed")})(e).then(function(e){return c(e)}).catch(function(e){return console.error("Error trying to loadAllUserData() \n Err >",e)}),function(e){if(e){var t={feed:null,pee:null,poop:null,sleep:null};return new Promise(function(){var a=Object(b.a)(p.a.mark(function a(n,r){var o,l,c,i,s;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o=function(e){return e.forEach(function(e){return t[e.data().type]=e.data()})},a.next=4,h.collection("records").doc(e).collection("activities").where("type","==","pee").orderBy("time","desc").limit(1).get();case 4:return l=a.sent,a.next=7,h.collection("records").doc(e).collection("activities").where("type","==","feed").orderBy("time","desc").limit(1).get();case 7:return c=a.sent,a.next=10,h.collection("records").doc(e).collection("activities").where("type","==","poop").orderBy("time","desc").limit(1).get();case 10:return i=a.sent,a.next=13,h.collection("records").doc(e).collection("activities").where("type","==","sleep").orderBy("time","desc").limit(1).get();case 13:return s=a.sent,o(c),o(l),o(i),o(s),a.abrupt("return",n(t));case 21:return a.prev=21,a.t0=a.catch(0),a.abrupt("return",r(a.t0));case 24:case"end":return a.stop()}},a,null,[[0,21]])}));return function(e,t){return a.apply(this,arguments)}}())}throw Error("notAuthed")}(e).then(function(e){return g(e)}).catch(function(e){return console.error("Error trying to loadBabyLastRecords() \n Err >",e)})}else c("notAuthed"),g("notAuthed")},newEventAdded:function(e){l.length?(c([].concat(Object(u.a)(l),[e])),g(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},f,Object(s.a)({},e.type,e)))):(c([e]),g(Object(s.a)({},e.type,e)))}}},e.children)},P=function(e){return r.a.createElement("div",{id:"bp-landingPageContainer"},r.a.createElement("div",{id:"bp-landingPage-welcome"},r.a.createElement("h1",null,"Welcome!")),r.a.createElement("p",null,"As a parent, keeping track of everything about your baby can be overwhelming. With ",r.a.createElement("strong",{id:"baby-patrol"},"Baby Patrol")," is easy to keep track of some of the most important activities."),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"feed"},"\ud83c\udf7c"),"Feed."),r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"pee"},"\ud83d\udca6"),"Pee."),r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"poop"},"\ud83d\udca9"),"Poo."),r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"sleep"},"\ud83d\udca4"),"Sleep.")),r.a.createElement("p",null,"Have the records ready for your next doctor's appointment, or to try to find out why is your baby crying"))},N=a(14),D=function(e){var t=e.type,a=e.icon,o=e.newEvent,l=function(e){e.preventDefault();var a={comment:"fire",time:new E.firestore.Timestamp.fromDate(new Date),type:t,uid:localStorage.getItem("babyPatrolUID")};try{!function(e){var t=e.comment,a=e.time,n=e.type,r=e.uid;if(r)return h.collection("records").doc(r).collection("activities").add({comment:t,time:a,type:n});throw Error("notAuthed")}(a)}catch(n){console.error("Error trying to addBabyRecords >>>",n.message)}o(a)};return r.a.createElement(n.Fragment,null,r.a.createElement("button",{onClick:function(e){return l(e)}},r.a.createElement("h2",null,r.a.createElement("span",{role:"img","aria-label":t},a))))},C=a(83),I=a(88),S=a(84),k=a(89),x=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props.agoString;return r.a.createElement("span",{className:"bp-fromNowLegend"},r.a.createElement("i",{className:"fas fa-history"}),e)},a}return Object(k.a)(t,e),t}(n.Component),A=function(e){var t=Object(n.useContext)(O),a=t.lastRecords,o=t.newEventAdded,l=null;return a&&a[e.type]&&(l=a[e.type].time.toDate()),r.a.createElement("div",{id:"bp-".concat(e.type,"Widget"),className:"bp-eventWidget"},r.a.createElement(D,{newEvent:function(e){return o(e)},icon:e.icon,type:e.type}),r.a.createElement(x,{type:e.type,agoString:l?function(e){if(e){var t=Object(N.differenceInMinutes)(new Date,e),a=parseInt(t/60),n=t%60;return a>0?"".concat(a," hours and ").concat(n," minutes ago"):"".concat(n," minutes ago")}return"No time available for this event"}(l):"No info available"}))},B=function(e){return r.a.createElement("div",{id:"bp-eventsWidgetContainer"},e.children)},L=(a(204),[{label:"feed",icon:"\ud83c\udf7c"},{label:"pee",icon:"\ud83d\udca6"},{label:"poop",icon:"\ud83d\udca9"},{label:"sleep",icon:"\ud83d\udca4"}]),R=function(e){var t=Object(n.useContext)(y).isAuthed,a=Object(n.useContext)(O).loadAllUserData;return Object(n.useEffect)(function(){a()},[]),r.a.createElement(n.Fragment,null,t?null:r.a.createElement(i.a,{to:"/login"}),r.a.createElement(B,null,L.map(function(e,t){return r.a.createElement(A,{key:t,icon:e.icon,type:e.label})})))},U=function(e){return r.a.createElement("footer",null,"Created by",r.a.createElement("a",{href:"https://www.jeanpaulgiraldo.com"}," Jean Paul Giraldo"))},W=function(e){var t=Object(n.useContext)(y),a=t.isAuthed,o=t.userLoggedIn,l=t.userLoggedOut;Object(n.useEffect)(function(){var e=localStorage.getItem("babyPatrolUID");e?o(e):l()},[a]);var i=r.a.createElement("div",{className:"bp-nav-linksContainer"},r.a.createElement(c.b,{className:"bp-nav-links",to:"/login"},"Login"),r.a.createElement(c.b,{className:"bp-nav-links",to:"/register"},"Register"));return a&&(i=r.a.createElement("div",{className:"bp-nav-linksContainer"},r.a.createElement(c.b,{className:"bp-nav-links",to:"/dashboard"},"Dashboards"),r.a.createElement(c.b,{className:"bp-nav-links",to:"/reports"},"Reports"),r.a.createElement(c.b,{className:"bp-nav-links",to:"/",onClick:l},"Logout"))),r.a.createElement("nav",null,r.a.createElement("div",null,r.a.createElement("h5",{id:"bp-nav-babyPatrolText"},r.a.createElement(c.b,{to:"/"},"BabyPatrol"))),i)},M=(a(209),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null),r.a.createElement("div",{id:"bp-bodyWrapper"},e.children),r.a.createElement(U,null))});function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var T=function(e){var t=Object(n.useContext)(y),a=t.isAuthed,o=t.userLoggedIn,l=Object(n.useState)({email:"",password:""}),c=Object(m.a)(l,2),u=c[0],d=c[1],p=Object(n.useState)(!1),b=Object(m.a)(p,2),f=b[0],g=b[1],h=function(e){d(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},u,Object(s.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{id:"bp-loginPage"},function(){if(a)return r.a.createElement(i.a,{to:"/dashboard"})}(),r.a.createElement("form",{className:"bp-form-login",onSubmit:function(e){var t,a;e.preventDefault(),u.email.length&&u.password.length?(t=u.email,a=u.password,E.auth().signInWithEmailAndPassword(t,a).catch(function(e){throw"auth/wrong-password"===e.code?new Error("Hmmm, looks that's not your password. Try again please."):"auth/invalid-email"===e.code||"auth/user-not-found"===e.code?new Error("We've never seen that email before. Please double-check."):new Error("Hmmm... something's please try again in a couple of minutes.")})).then(function(e){console.log("res >>>",e),e.user.uid?o(e.user.uid):g("Ooops, something went wrong. Please try again in a few minutes.")}).catch(function(e){g(e.message)}):g("Please fill all necessary fields")}},r.a.createElement("h1",null,"Login"),f?r.a.createElement("span",{className:"bp-loginErrorMsg"},r.a.createElement("i",{className:"fas fa-exclamation-circle"}),r.a.createElement("em",null," ",f," ")):null,r.a.createElement("input",{onChange:h,id:"email",className:"bp-userInput",type:"email",name:"email",value:u.email,"aria-label":"email",placeholder:"Email",min:"9",required:!0,autoFocus:!0}),r.a.createElement("input",{onChange:h,id:"password",className:"bp-userInput",type:"password",name:"password",value:u.password,"aria-label":"password",placeholder:"Password",min:"6",required:!0}),r.a.createElement("input",{className:"bp-form-button",type:"submit",value:"LOGIN"})))},Y=function(e,t){return e&&e.length>=t};function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var H=function(e){var t=Object(n.useContext)(y),a=t.isAuthed,o=t.userLoggedIn,l=Object(n.useState)({email:"",password:"",confirmPassword:"",babyName:""}),c=Object(m.a)(l,2),u=c[0],d=c[1],p=Object(n.useState)({email:!1,password:!1,confirmPassword:!1,babyName:!1}),b=Object(m.a)(p,2),f=b[0],g=b[1],v=function(e){d(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},u,Object(s.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{id:"bp-registerPage"},function(){if(a)return r.a.createElement(i.a,{to:"/dashboard"})}(),r.a.createElement("form",{className:"form-register",onSubmit:function(e){e.preventDefault();var t,a,n,r,l,c=Y(u.email,9),i=Y(u.password,6),s=(t=u.password,a=u.confirmPassword,t&&t.length>0&&a&&a.length>0&&t===a);c&&i&&s?(console.log("Valid"),(n=u.email,r=u.password,l=u.babyName,E.auth().createUserWithEmailAndPassword(n,r).then(function(e){return h.collection("users").doc(e.user.uid).set({babyName:l}),e.user.uid}).catch(function(e){return console.error("Error at registerUser() \n Error Code: ".concat(e.code," \n Msg: ").concat(e.message)),!1})).then(function(e){return o(e)}).catch(function(e){return console.error("Error at registerUser() [Register.jsx]")})):g({email:!c&&"Your email looks too short.",password:!i&&"Your password needs to be at least 6 characters long.",confirmPassword:!s&&"Passwords do not match."})}},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Register"),r.a.createElement("input",{onChange:v,id:"babyName",className:"bp-userInput",type:"babyName",name:"babyName",value:u.babyName,placeholder:"Baby's Name","aria-label":"Baby's Name",required:!0,autoFocus:!0}),r.a.createElement("input",{onChange:v,id:"email",className:"bp-userInput",type:"email",name:"email",value:u.email,placeholder:"Email","aria-label":"Email",required:!0}),f.email?r.a.createElement("span",{className:"bp-inputMsg"},r.a.createElement("i",{className:"fas fa-exclamation-circle"}),r.a.createElement("em",null," ",f.email," ")):null,r.a.createElement("input",{onChange:v,id:"password",className:"bp-userInput",type:"password",name:"password",value:u.password,placeholder:"Password","aria-label":"Password",required:!0}),f.password?r.a.createElement("span",{className:"bp-inputMsg"},r.a.createElement("i",{className:"fas fa-exclamation-circle"}),r.a.createElement("em",null," ",f.password," ")):null,r.a.createElement("input",{onChange:v,id:"confirmPassword",className:"bp-userInput",type:"password",name:"confirmPassword",value:u.confirmPassword,placeholder:"Confirm Password","aria-label":"Confirm Password",required:!0}),f.confirmPassword?r.a.createElement("span",{className:"bp-inputMsg"},r.a.createElement("i",{className:"fas fa-exclamation-circle"}),r.a.createElement("em",null," ",f.confirmPassword," ")):null,r.a.createElement("input",{className:"bp-form-button",type:"submit",value:"REGISTER"})))},G=function(e){var t=e.data,a=function(e){return L.filter(function(t){return t.label===e})[0].icon},n=r.a.createElement("h2",null,"Loading..."),o=null;if(t&&0!==t.length||(n=r.a.createElement("h2",null,"No data available. Try adding a few events in the"," ",r.a.createElement("a",{href:"/dashboard"},"dashboard"))),t&&t.length){var l="";o=t.map(function(e,t){return Object(N.isSameDay)(e.time.toDate(),l)?r.a.createElement("tr",{key:t},r.a.createElement("td",null),r.a.createElement("td",null,Object(N.format)(e.time.toDate(),"h:mm a")),r.a.createElement("td",null,e.type),r.a.createElement("td",null,a(e.type))):(l=e.time.toDate(),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:t},r.a.createElement("td",{colspan:"4",className:"bp-table-dateCell"},Object(N.format)(e.time.toDate(),"dddd, MMM D / YYYY"))),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,Object(N.format)(e.time.toDate(),"h:mm a")),r.a.createElement("td",null,e.type),r.a.createElement("td",null,a(e.type)))))})}return o?r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Activity"),r.a.createElement("th",null,"Icon"))),r.a.createElement("tbody",null,o)):r.a.createElement(r.a.Fragment,null,n)},J=function(e){var t=Object(n.useContext)(O).babyRecords,a=Object(n.useContext)(y).isAuthed;return r.a.createElement("div",{id:"bp-reports"},a?null:r.a.createElement(i.a,{to:"/login"}),r.a.createElement(G,{data:t}))},V=function(){return r.a.createElement(c.a,null,r.a.createElement(v,null,r.a.createElement(j,null,r.a.createElement(M,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:P}),r.a.createElement(i.b,{path:"/dashboard",component:R}),r.a.createElement(i.b,{path:"/login",component:T}),r.a.createElement(i.b,{path:"/register",component:H}),r.a.createElement(i.b,{path:"/reports",component:J}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,t,a){e.exports=a(210)},95:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.006c25ab.chunk.js.map