(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,n){},50:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(32),c=n.n(a),s=(n(44),n(11)),o=n(7),i=n(17),l=n(18),d=n(37),b=n(16),u=n(27),j=n.n(u),h=n(33),m=n(28);n(57),n(47);m.a.initializeApp({apiKey:"AIzaSyATYA5g7ShVwfVxDs9B23IXw7hN_xH2Hxg",authDomain:"babytimes-9476d.firebaseapp.com",databaseURL:"https://babytimes-9476d.firebaseio.com",projectId:"babytimes-9476d",storageBucket:"babytimes-9476d.appspot.com",messagingSenderId:"702098493706"});var p=m.a,O=p.firestore(),f=n(1),x=Object(r.createContext)(),g=function(e){var t=Object(r.useState)(!1),n=Object(b.a)(t,2),a=n[0],c=n[1];return p.auth().onAuthStateChanged((function(e){})),Object(f.jsx)(x.Provider,{value:{isAuthed:a,userLoggedIn:function(e){localStorage.setItem("babyPatrolUID",e),c(!0)},userLoggedOut:function(){localStorage.removeItem("babyPatrolUID"),c(!1),p.auth().signOut().then((function(){})).catch((function(e){console.error("Error at logoutUser() \n Error Code: ".concat(e.code," \n Msg: ").concat(e.message))}))}},children:e.children})},y=Object(r.createContext)(),v=function(e){var t=Object(r.useContext)(x).isAuthed,n=Object(r.useState)([]),a=Object(b.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(null),u=Object(b.a)(o,2),m=u[0],p=u[1];return Object(f.jsx)(y.Provider,{value:{babyRecords:c,lastRecords:m,loadAllUserData:function(){if(t){var e=localStorage.getItem("babyPatrolUID");(function(e){if(e){var t=[];return O.collection("records").doc(e).collection("activities").orderBy("time","desc").get().then((function(e){return e.forEach((function(e){return t.push(e.data())})),t})).catch((function(e){return e}))}throw Error("notAuthed")})(e).then((function(e){return s(e)})).catch((function(e){return console.error("Error trying to loadAllUserData() \n Err >",e)})),function(e){if(e){var t={feed:null,pee:null,poop:null,sleep:null};return new Promise(function(){var n=Object(h.a)(j.a.mark((function n(r,a){var c,s,o,i,l;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=function(e){return e.forEach((function(e){return t[e.data().type]=e.data()}))},n.next=4,O.collection("records").doc(e).collection("activities").where("type","==","pee").orderBy("time","desc").limit(1).get();case 4:return s=n.sent,n.next=7,O.collection("records").doc(e).collection("activities").where("type","==","feed").orderBy("time","desc").limit(1).get();case 7:return o=n.sent,n.next=10,O.collection("records").doc(e).collection("activities").where("type","==","poop").orderBy("time","desc").limit(1).get();case 10:return i=n.sent,n.next=13,O.collection("records").doc(e).collection("activities").where("type","==","sleep").orderBy("time","desc").limit(1).get();case 13:return l=n.sent,c(o),c(s),c(i),c(l),n.abrupt("return",r(t));case 21:return n.prev=21,n.t0=n.catch(0),n.abrupt("return",a(n.t0));case 24:case"end":return n.stop()}}),n,null,[[0,21]])})));return function(e,t){return n.apply(this,arguments)}}())}throw Error("notAuthed")}(e).then((function(e){return p(e)})).catch((function(e){return console.error("Error trying to loadBabyLastRecords() \n Err >",e)}))}else s("notAuthed"),p("notAuthed")},newEventAdded:function(e){c.length?(s([].concat(Object(d.a)(c),[e])),p(Object(l.a)(Object(l.a)({},m),{},Object(i.a)({},e.type,e)))):(s([e]),p(Object(i.a)({},e.type,e)))}},children:e.children})},w=function(e){return Object(f.jsx)("div",{id:"bp-landingPageContainer",children:Object(f.jsxs)("div",{id:"bp-landingPage-welcome",children:[Object(f.jsx)("p",{children:"As a parent, keeping track of everything about your baby can be overwhelming. With Baby Patrol, keeping track of your baby's most important activities, is easy."}),Object(f.jsxs)("ul",{children:[Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{role:"img","aria-label":"feed",children:"\ud83c\udf7c"}),"Feeding"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{role:"img","aria-label":"pee",children:"\ud83d\udca6"}),"Peeing"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{role:"img","aria-label":"poop",children:"\ud83d\udca9"}),"Pooping"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{role:"img","aria-label":"sleep",children:"\ud83d\udca4"}),"Sleeping"]})]}),Object(f.jsx)("p",{children:"Have the records ready for your next doctor's appointment, or to try to find out why your baby is crying."})]})})},N=n(59),P=function(e){var t=e.type,n=e.icon,a=e.newEvent,c=function(e){e.preventDefault();var n={comment:"fire",time:new p.firestore.Timestamp.fromDate(new Date),type:t,uid:localStorage.getItem("babyPatrolUID")};try{!function(e){var t=e.comment,n=e.time,r=e.type,a=e.uid;if(a)return O.collection("records").doc(a).collection("activities").add({comment:t,time:n,type:r});throw Error("notAuthed")}(n)}catch(r){console.error("Error trying to addBabyRecords >>>",r.message)}a(n)};return Object(f.jsx)(r.Fragment,{children:Object(f.jsx)("button",{onClick:function(e){return c(e)},children:Object(f.jsx)("h2",{children:Object(f.jsx)("span",{role:"img","aria-label":t,children:n})})})})},C=n(34),E=n(38),I=n(36),A=function(e){Object(E.a)(n,e);var t=Object(I.a)(n);function n(){var e;Object(C.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).render=function(){var t=e.props.agoString;return Object(f.jsxs)("span",{className:"bp-fromNowLegend",children:[Object(f.jsx)("i",{className:"fas fa-history"}),t]})},e}return n}(r.Component),S=function(e){var t=Object(r.useContext)(y),n=t.lastRecords,a=t.newEventAdded,c=null;return n&&n[e.type]&&(c=n[e.type].time.toDate()),Object(f.jsxs)("div",{id:"bp-".concat(e.type,"Widget"),className:"bp-eventWidget",children:[Object(f.jsx)(P,{newEvent:function(e){return a(e)},icon:e.icon,type:e.type}),Object(f.jsx)(A,{type:e.type,agoString:c?function(e){if(e){var t=Object(N.a)(new Date,e),n=parseInt(t/60),r=t%60;return n>0?"".concat(n," hours and ").concat(r," minutes ago"):"".concat(r," minutes ago")}return"No time available for this event"}(c):"No info available"})]})},D=function(e){var t=e.children;return Object(f.jsx)("div",{id:"bp-bodyWrapper",children:Object(f.jsx)("div",{id:"bp-eventsWidgetContainer",children:t})})},k=(n(50),[{label:"feed",icon:"\ud83c\udf7c"},{label:"pee",icon:"\ud83d\udca6"},{label:"poop",icon:"\ud83d\udca9"},{label:"sleep",icon:"\ud83d\udca4"}]),B=function(e){var t=Object(r.useContext)(x).isAuthed,n=Object(r.useContext)(y).loadAllUserData;return Object(r.useEffect)((function(){n()}),[]),Object(f.jsxs)(r.Fragment,{children:[t?null:Object(f.jsx)(o.a,{to:"/login"}),Object(f.jsx)(D,{children:k.map((function(e,t){return Object(f.jsx)(S,{icon:e.icon,type:e.label},t)}))})]})},L=function(e){return Object(f.jsxs)("footer",{children:["Created by",Object(f.jsx)("a",{href:"https://www.jeanpaulgiraldo.com",children:" Jean Paul Giraldo"})]})},U=function(e){var t=Object(r.useContext)(x),n=t.isAuthed,a=t.userLoggedIn,c=t.userLoggedOut;Object(r.useEffect)((function(){var e=localStorage.getItem("babyPatrolUID");e?a(e):c()}),[n]);var o=Object(f.jsxs)("div",{className:"bp-nav-linksContainer",children:[Object(f.jsx)(s.b,{className:"bp-nav-links",to:"/login",children:"Login"}),Object(f.jsx)(s.b,{className:"bp-nav-links",to:"/register",children:"Register"})]});return n&&(o=Object(f.jsxs)("div",{className:"bp-nav-linksContainer",children:[Object(f.jsx)(s.b,{className:"bp-nav-links",to:"/dashboard",children:"Dashboards"}),Object(f.jsx)(s.b,{className:"bp-nav-links",to:"/reports",children:"Reports"}),Object(f.jsx)(s.b,{className:"bp-nav-links",to:"/",onClick:c,children:"Logout"})]})),Object(f.jsxs)("nav",{children:[Object(f.jsx)("div",{children:Object(f.jsx)("h5",{id:"bp-nav-babyPatrolText",children:Object(f.jsx)(s.b,{to:"/",children:"BabyPatrol"})})}),o]})},R=(n(55),function(e){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(U,{}),Object(f.jsx)("div",{children:e.children}),Object(f.jsx)(L,{})]})}),W=function(e){var t=Object(r.useContext)(x),n=t.isAuthed,a=t.userLoggedIn,c=Object(r.useState)({email:"",password:""}),s=Object(b.a)(c,2),d=s[0],u=s[1],j=Object(r.useState)(!1),h=Object(b.a)(j,2),m=h[0],O=h[1],g=function(e){u(Object(l.a)(Object(l.a)({},d),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(f.jsxs)("div",{id:"bp-loginPage",children:[function(){if(n)return Object(f.jsx)(o.a,{to:"/dashboard"})}(),Object(f.jsx)("h1",{children:"Please Sign In To Your BabyPatrol Account"}),Object(f.jsxs)("form",{className:"bp-form-login",onSubmit:function(e){var t,n;e.preventDefault(),d.email.length&&d.password.length?(t=d.email,n=d.password,p.auth().signInWithEmailAndPassword(t,n).catch((function(e){throw"auth/wrong-password"===e.code?new Error("Hmmm, looks that's not your password. Try again please."):"auth/invalid-email"===e.code||"auth/user-not-found"===e.code?new Error("We've never seen that email before. Please double-check."):new Error("Hmmm... something's please try again in a couple of minutes.")}))).then((function(e){e.user.uid?a(e.user.uid):O("Ooops, something went wrong. Please try again in a few minutes.")})).catch((function(e){O(e.message)})):O("Please fill all necessary fields")},children:[m?Object(f.jsxs)("span",{className:"bp-loginErrorMsg",children:[Object(f.jsx)("i",{className:"fas fa-exclamation-circle"}),Object(f.jsxs)("em",{children:[" ",m," "]})]}):null,Object(f.jsx)("input",{onChange:g,id:"email",className:"bp-userInput",type:"email",name:"email",value:d.email,"aria-label":"email",placeholder:"Email",min:"9",required:!0,autoFocus:!0}),Object(f.jsx)("input",{onChange:g,id:"password",className:"bp-userInput",type:"password",name:"password",value:d.password,"aria-label":"password",placeholder:"Password",min:"6",required:!0}),Object(f.jsx)("input",{className:"bp-form-button",type:"submit",value:"LOGIN"})]})]})},M=function(e,t){return e&&e.length>=t},T=function(e){var t=Object(r.useContext)(x),n=t.isAuthed,a=t.userLoggedIn,c=Object(r.useState)({firstName:"",lastName:"",country:"",email:"",password:"",confirmPassword:"",babyName:""}),s=Object(b.a)(c,2),d=s[0],u=s[1],j=Object(r.useState)({firstName:!1,lastName:!1,country:!1,email:!1,password:!1,confirmPassword:!1,babyName:!1}),h=Object(b.a)(j,2),m=h[0],g=h[1],y=function(e){u(Object(l.a)(Object(l.a)({},d),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(f.jsxs)("div",{id:"bp-registerPage",children:[function(){if(n)return Object(f.jsx)(o.a,{to:"/dashboard"})}(),Object(f.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Create Your BabyPatrol Account"}),Object(f.jsxs)("form",{className:"form-register",onSubmit:function(e){e.preventDefault();var t,n,r,c,s,o=M(d.email,9),i=M(d.password,6),l=(t=d.password,n=d.confirmPassword,t&&t.length>0&&n&&n.length>0&&t===n);o&&i&&l?(r=d.email,c=d.password,s=d.babyName,p.auth().createUserWithEmailAndPassword(r,c).then((function(e){return O.collection("users").doc(e.user.uid).set({babyName:s}),e.user.uid})).catch((function(e){return console.error("Error at registerUser() \n Error Code: ".concat(e.code," \n Msg: ").concat(e.message)),!1}))).then((function(e){return a(e)})).catch((function(e){return console.error("Error at registerUser() [Register.jsx]")})):g({email:!o&&"Your email looks too short.",password:!i&&"Your password needs to be at least 6 characters long.",confirmPassword:!l&&"Passwords do not match."})},children:[Object(f.jsx)("input",{onChange:y,id:"babyName",className:"bp-userInput",type:"babyName",name:"babyName",value:d.babyName,placeholder:"Baby's Name","aria-label":"Baby's Name",required:!0}),Object(f.jsx)("input",{onChange:y,id:"email",className:"bp-userInput",type:"email",name:"email",value:d.email,placeholder:"Email","aria-label":"Email",required:!0}),m.email?Object(f.jsxs)("span",{className:"bp-inputMsg",children:[Object(f.jsx)("i",{className:"fas fa-exclamation-circle"}),Object(f.jsxs)("em",{children:[" ",m.email," "]})]}):null,Object(f.jsx)("input",{onChange:y,id:"password",className:"bp-userInput",type:"password",name:"password",value:d.password,placeholder:"Password","aria-label":"Password",required:!0}),m.password?Object(f.jsxs)("span",{className:"bp-inputMsg",children:[Object(f.jsx)("i",{className:"fas fa-exclamation-circle"}),Object(f.jsxs)("em",{children:[" ",m.password," "]})]}):null,Object(f.jsx)("input",{onChange:y,id:"confirmPassword",className:"bp-userInput",type:"password",name:"confirmPassword",value:d.confirmPassword,placeholder:"Confirm Password","aria-label":"Confirm Password",required:!0}),m.confirmPassword?Object(f.jsxs)("span",{className:"bp-inputMsg",children:[Object(f.jsx)("i",{className:"fas fa-exclamation-circle"}),Object(f.jsxs)("em",{children:[" ",m.confirmPassword," "]})]}):null,Object(f.jsx)("input",{className:"bp-form-button",type:"submit",value:"REGISTER"})]})]})},F=n(60),q=n(58),H=function(e){var t=e.data,n=function(e){return k.filter((function(t){return t.label===e}))[0].icon},r=Object(f.jsx)("h2",{children:"Loading..."}),a=null;if(t&&0!==t.length||(r=Object(f.jsxs)("h2",{children:["No data available. Try adding a few events in the"," ",Object(f.jsx)("a",{href:"/dashboard",children:"dashboard"})]})),t&&t.length){var c="";a=t.map((function(e,t){return Object(F.a)(e.time.toDate(),c)?Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{}),Object(f.jsx)("td",{children:Object(q.a)(e.time.toDate(),"h:mm a")}),Object(f.jsx)("td",{children:e.type}),Object(f.jsx)("td",{children:n(e.type)})]},t):(c=e.time.toDate(),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:"4",className:"bp-table-dateCell",children:Object(q.a)(e.time.toDate(),"eeee, MMM d / yyyy")})},t),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{}),Object(f.jsx)("td",{children:Object(q.a)(e.time.toDate(),"h:mm a")}),Object(f.jsx)("td",{children:e.type}),Object(f.jsx)("td",{children:n(e.type)})]})]}))}))}return a?Object(f.jsx)("div",{id:"bp-report-tableContainer",children:Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{}),Object(f.jsx)("th",{children:"Time"}),Object(f.jsx)("th",{children:"Activity"}),Object(f.jsx)("th",{children:"Icon"})]})}),Object(f.jsx)("tbody",{children:a})]})}):Object(f.jsx)(f.Fragment,{children:r})},Y=function(e){var t=Object(r.useContext)(y).babyRecords,n=Object(r.useContext)(x).isAuthed;return Object(f.jsxs)("div",{id:"bp-reports",children:[n?null:Object(f.jsx)(o.a,{to:"/login"}),Object(f.jsx)(H,{data:t})]})},G=function(){return Object(f.jsx)(s.a,{children:Object(f.jsx)(g,{children:Object(f.jsx)(v,{children:Object(f.jsx)(R,{children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{exact:!0,path:"/",component:w}),Object(f.jsx)(o.b,{path:"/dashboard",component:B}),Object(f.jsx)(o.b,{path:"/login",component:W}),Object(f.jsx)(o.b,{path:"/register",component:T}),Object(f.jsx)(o.b,{path:"/reports",component:Y})]})})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(f.jsx)(G,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[56,1,2]]]);
//# sourceMappingURL=main.b3f92517.chunk.js.map